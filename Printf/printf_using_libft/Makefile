#-------------------------------------
# All .c files
SRCS = ft_printf.c \
       ft_put_characters.c \
       ft_put_numbers.c

#-------------------------------------
# All .o files
OBJS = $(SRCS:.c=.o)
#---------------------------------------

#---------------------------------------
# Name of the Final lib file
NAME = libftprintf.a
#---------------------------------------

#---------------------------------------
# Compiler to use
CC = cc
#---------------------------------------

#---------------------------------------
# Flags to use
CFLAGS = -Wall -Werror -Wextra
#---------------------------------------

#----------------------------------------------------------------------------------------------
# Includes location '-I' is the includes flag './' means 'this directory'
INCS = -I ./
#----------------------------------------------------------------------------------------------

#----------------------------------------------------------------------------------------------
# Compiler for libs, 'ar' is the tool to create static libraries and 'crs' are the options of compilation
AR = ar crs
#----------------------------------------------------------------------------------------------

#----------------------------------------------------------------------------------------------
# LIBFT's location in this case we have libft inside the project's root directory, so we use:
LIBFT = libft/libft.a
#----------------------------------------------------------------------------------------------

#----------------------------------------------------------------------------------------------
# Remove files, 'rm' for remove 'r' for also remove directories, 'f' for force removal
RM = rm -rf
#----------------------------------------------------------------------------------------------

#----------------------------------------------------
# When you run 'make all' it runs the rule $(NAME)
all: libft $(NAME)
#----------------------------------------------------

#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# Rule to compile .c files into .o files
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@ $(INCS)
# When running the program this will look something like: 'cc -Wall -Werror -Wextra -c file.c -o file.o -I ./'
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#----------------------------------------------------
# Creates libft.a file
libft:
	make -C libft all
#----------------------------------------------------

#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# This rule builds the final static library libftprintf.a by combining libft.a with the compiled object files
$(NAME): $(OBJS)
	cp $(LIBFT) $(NAME)
	$(AR) $(NAME) $(OBJS)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#----------------------------------------------------
# Clean rule to remove .o files
clean:
	$(RM) $(OBJS)
	make -C libft clean
#----------------------------------------------------

#------------------------------------------------------------------------------------------
# Full clean: runs 'clean' and removes the libftprintf.a file
fclean: clean
	$(RM) $(NAME)
	make -C libft fclean
#------------------------------------------------------------------------------------------

#---------------------------------------------------------------------------------------------------------------------------------------------
# Runs 'fclean' and 'all', meaning it cleans all the .o objects and libftprintf.a and then runs the rule 'all' to recompile everything.
re: fclean all
#---------------------------------------------------------------------------------------------------------------------------------------------

#----------------------------------------------------
# Names of rules that are not in this format '$(...)'
.PHONY: all clean fclean re libft
#----------------------------------------------------